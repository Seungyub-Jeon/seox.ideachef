(function(){"use strict";if(window.KoreanWebAnalyzerLoader){alert('한국어 웹사이트 분석기가 이미 실행 중입니다.');return;}window.KoreanWebAnalyzerLoader={version:'0.1.0',getScriptURL:function(){const isDev=false;const baseURL=isDev?'http://localhost:3000':'https://your-domain.com';return `${baseURL}/assets/js/bookmarklet.min.js?v=${new Date().getTime()}`;},handleError:function(message){const errorDiv=document.createElement('div');errorDiv.style.position='fixed';errorDiv.style.top='20px';errorDiv.style.right='20px';errorDiv.style.padding='15px';errorDiv.style.backgroundColor='#f8d7da';errorDiv.style.color='#721c24';errorDiv.style.border='1px solid #f5c6cb';errorDiv.style.borderRadius='5px';errorDiv.style.boxShadow='0 2px 10px rgba(0,0,0,0.1)';errorDiv.style.zIndex='9999999';errorDiv.style.fontFamily='Arial, sans-serif';errorDiv.style.fontSize='14px';errorDiv.innerHTML=`<div style="display:flex;justify-content:space-between;align-items:center;"><strong>로드 오류!</strong><button id="korean-web-analyzer-error-close" style="border:none;background:none;cursor:pointer;font-size:18px;">&times;</button></div><p>${message}</p><p>스크립트를 로드할 수 없습니다. 네트워크 연결을 확인해 주세요.</p>`;document.body.appendChild(errorDiv);document.getElementById('korean-web-analyzer-error-close').addEventListener('click',function(){errorDiv.remove();});console.error('[KoreanWebAnalyzerLoader] '+message);},loadMainScript:function(){try{const loadingDiv=document.createElement('div');loadingDiv.id='korean-web-analyzer-loading';loadingDiv.style.position='fixed';loadingDiv.style.top='20px';loadingDiv.style.right='20px';loadingDiv.style.padding='15px';loadingDiv.style.backgroundColor='#cce5ff';loadingDiv.style.color='#004085';loadingDiv.style.border='1px solid #b8daff';loadingDiv.style.borderRadius='5px';loadingDiv.style.boxShadow='0 2px 10px rgba(0,0,0,0.1)';loadingDiv.style.zIndex='9999999';loadingDiv.style.fontFamily='Arial, sans-serif';loadingDiv.style.fontSize='14px';loadingDiv.textContent='한국어 웹사이트 분석기 로드 중...';document.body.appendChild(loadingDiv);const scriptElement=document.createElement('script');scriptElement.id='korean-web-analyzer-script';scriptElement.src=this.getScriptURL();scriptElement.async=true;scriptElement.onload=function(){if(document.getElementById('korean-web-analyzer-loading')){document.getElementById('korean-web-analyzer-loading').remove();}console.log('[KoreanWebAnalyzerLoader] 메인 스크립트 로드 완료');};scriptElement.onerror=function(){if(document.getElementById('korean-web-analyzer-loading')){document.getElementById('korean-web-analyzer-loading').remove();}window.KoreanWebAnalyzerLoader.handleError('메인 스크립트 로드 실패');};document.body.appendChild(scriptElement);}catch(err){this.handleError('예기치 않은 오류가 발생했습니다: '+err.message);}},checkBrowserCompatibility:function(){const isCompatible=('querySelector' in document&&'addEventListener' in window&&'localStorage' in window&&'JSON' in window);if(!isCompatible){this.handleError('이 브라우저는 지원되지 않습니다. 최신 브라우저를 사용해 주세요.');}return isCompatible;},init:function(){console.log('[KoreanWebAnalyzerLoader] 초기화 중...');if(!this.checkBrowserCompatibility()){return;}if(document.readyState==='complete'||document.readyState==='interactive'){this.loadMainScript();}else{window.addEventListener('DOMContentLoaded',function(){window.KoreanWebAnalyzerLoader.loadMainScript();});}}};window.KoreanWebAnalyzerLoader.init();})();